{"title":"网络是如何连接的","date":"2019-12-17T09:51:01.024Z","date_formatted":{"ll":"Dec 17, 2019","L":"12/17/2019","MM-DD":"12-17"},"link":"2019/12/17/网络是如何连接的","updated":"2019-12-18T09:57:04.227Z","content":"<h1 id=\"网络是如何连接的\">网络是如何连接的<a href=\"2019/12/17/网络是如何连接的#网络是如何连接的\"></a></h1><p>sword对于  <strong><em>网络是如何连接</em></strong>  的的笔记。</p>\n<h4 id=\"第一章\">第一章<a href=\"2019/12/17/网络是如何连接的#第一章\"></a></h4><p>​           简单的说网络的连接也就是客户端的电脑发出的请求通过互联网到达相关的服务器，服务器通关请求消息，返回响应消息。  </p>\n<p>基本过程：             </p>\n<pre><code>1. 客户端输入网址     \n2. 浏览器进行解析\n3. 浏览器生成http消息同时向DNS服务器查询目标的IP地址\n4. 服务器返回响应消息给浏览器                                </code></pre><h4 id=\"第二章\">第二章<a href=\"2019/12/17/网络是如何连接的#第二章\"></a></h4><p>​            客户端与服务器通过Socket库建立起通信后，需要创建套接字才能进行数据的收发操作。数据的收发传输一般是一个数据包。在没进入互联网前数据包的结构一般为 IP头部   tcp头部  数据块 在通信过程中需要用ACK号来进行确认数据是否完成收发。因为一问一答的工作过程效率不高，因此产生了滑动窗口和ACK相结合的工作模式。</p>\n<p>​          在进入互联网后，包的结构会发生改变。或者说包的完整结构应该是 </p>\n<div class=\"article-bounded\"><div class=\"article-table\"><table>\n<thead>\n<tr>\n<th align=\"center\">报头和起始帧分界符SFD</th>\n<th align=\"center\">MAC头部</th>\n<th align=\"center\">IP头部</th>\n<th align=\"center\">TCP头部</th>\n<th align=\"center\">数据</th>\n<th align=\"center\">FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">测定时机|SFD确定帧起始位置</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">帧校验序列</td>\n</tr>\n</tbody></table></div></div>\n<p>​          在数据收发完成后，断开连接，删除套接字。客户端与服务器的通信就完成了。</p>\n<h4 id=\"第三章\">第三章<a href=\"2019/12/17/网络是如何连接的#第三章\"></a></h4><p>​     本章主要介绍硬件设备，网络包通过网线进行传输时信号会衰减，所以一般通过双绞线进行传播。数据包通过集线器广播到所有端口，交换机接受到后根据数据包的MAC地址进行相对应的转发。之后数据包到路由器，路由器根据包的IP地址在互联网内进行转发。</p>\n<p>​    以上便是网线，集线器，交换机和路由器大概功能。</p>\n<h4 id=\"第四章\">第四章<a href=\"2019/12/17/网络是如何连接的#第四章\"></a></h4><p>​    通过接入网进入互联网内部,数据包会被ADSL Modem分解成ATM信元，通过双绞线或者光纤进行通信。到达电话局的DSLAM，在转发给BAS，BAS将ATM信元还原成数据包并加上L2TP头部通过隧道，在隧道出口包ppp头部和L2TP头部丢弃，最终流向web服务器。</p>\n<p>​     现在具体来讲在接入网接入到互联网的过程时，当数据进入到互联网是有很多的pop节点进行数据的传输接力在通过NOC进行转发，如果数据的传输需要跨运营商进行传播则需要IX来进行传输。</p>\n<p>[ ADSL Modem ] : 调制调节器，就是 把路由器和ADSL Modem集成在一起</p>\n<h4 id=\"第五章\">第五章<a href=\"2019/12/17/网络是如何连接的#第五章\"></a></h4><p>​    当请求消息到达服务器时，先会通过防火墙对包进行检查，是否允许包通过。包通过后，缓存服务器会确认需要返回的消息是否需要更新，如果不需要更新消息则代替服务器返回缓存消息。这是为了缓解服务器的负载，还有轮询的方式帮助服务器缓解负载。如果需要返回新的消息数据包会达到服务器，服务器解析包的请求来返回响应的消息给客户端。</p>\n<h4 id=\"第六章\">第六章<a href=\"2019/12/17/网络是如何连接的#第六章\"></a></h4><p> 最后数据包到达服务器，服务器协议栈来组装这个包。之后HTTP恢复成原始状态，Socket库转交给服务器，服务器分析http消息，根据请求消息返回个客户端。</p>\n<h3 id=\"总体图\">总体图<a href=\"2019/12/17/网络是如何连接的#总体图\"></a></h3><p><img src=\"/2019/12/17/%E7%BD%91%E7%BB%9C%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%9E%E6%8E%A5%E7%9A%84/E:%5Chexo%5Csource_posts%5C%E7%BD%91%E7%BB%9C%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%9E%E6%8E%A5%E7%9A%84%5C%E7%BD%91%E7%BB%9C%E5%A6%82%E4%BD%95%E8%BF%9E%E6%8E%A51.png\" alt=\"网络是如何连接的\" class=\"article-img\"></p>\n","plink":"http://yoursite.com/2019/12/17/网络是如何连接的/","toc":[{"title":"网络是如何连接的","id":"网络是如何连接的","index":"1"}]}